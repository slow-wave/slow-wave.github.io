<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[MySQL] 문법/함수 정리 | slow-wave blog</title><meta name=keywords content="DB,MySQL"><meta name=description content="코딩테스트 연습 할 때 Leetcode 플랫폼을 많이 이용합니다. discussion을 보면 문제에 대한 각자의 코드와 설명이 있는데 많은 사람들이 vote와 댓글 기능을 이용해 피드백을 줍니다. 보통은 칭찬이 많이 달려있는 글을 위주로 참고합니다. 별로인 것에 대해서는 가차없는 피드백이 적혀있다는 것도 도움이 되는 것 같습니다. 또 댓글로 시간복잡도 등에 대해서 토론하는 부분도 있어서 유용합니다.
개인적으로 SQL을 공부 할 필요성을 느껴서 MySQL의 문법을 중심으로 problem과 code를 정리해봤습니다. discussion을 꼼꼼히 읽어서 어떻게 코딩하는 것이 좋은 방향인지도 알아보려고 합니다."><meta name=author content="Me"><link rel=canonical href=http://slow-wave.github.io/post/database/db_mysql_0/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6F557TM67S"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6F557TM67S",{anonymize_ip:!1})}</script><meta property="og:title" content="[MySQL] 문법/함수 정리"><meta property="og:description" content="코딩테스트 연습 할 때 Leetcode 플랫폼을 많이 이용합니다. discussion을 보면 문제에 대한 각자의 코드와 설명이 있는데 많은 사람들이 vote와 댓글 기능을 이용해 피드백을 줍니다. 보통은 칭찬이 많이 달려있는 글을 위주로 참고합니다. 별로인 것에 대해서는 가차없는 피드백이 적혀있다는 것도 도움이 되는 것 같습니다. 또 댓글로 시간복잡도 등에 대해서 토론하는 부분도 있어서 유용합니다.
개인적으로 SQL을 공부 할 필요성을 느껴서 MySQL의 문법을 중심으로 problem과 code를 정리해봤습니다. discussion을 꼼꼼히 읽어서 어떻게 코딩하는 것이 좋은 방향인지도 알아보려고 합니다."><meta property="og:type" content="article"><meta property="og:url" content="http://slow-wave.github.io/post/database/db_mysql_0/"><meta property="og:image" content="http://slow-wave.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-10-21T01:43:36+09:00"><meta property="article:modified_time" content="2022-10-21T01:43:36+09:00"><meta property="og:site_name" content="slow-wave blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://slow-wave.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[MySQL] 문법/함수 정리"><meta name=twitter:description content="코딩테스트 연습 할 때 Leetcode 플랫폼을 많이 이용합니다. discussion을 보면 문제에 대한 각자의 코드와 설명이 있는데 많은 사람들이 vote와 댓글 기능을 이용해 피드백을 줍니다. 보통은 칭찬이 많이 달려있는 글을 위주로 참고합니다. 별로인 것에 대해서는 가차없는 피드백이 적혀있다는 것도 도움이 되는 것 같습니다. 또 댓글로 시간복잡도 등에 대해서 토론하는 부분도 있어서 유용합니다.
개인적으로 SQL을 공부 할 필요성을 느껴서 MySQL의 문법을 중심으로 problem과 code를 정리해봤습니다. discussion을 꼼꼼히 읽어서 어떻게 코딩하는 것이 좋은 방향인지도 알아보려고 합니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://slow-wave.github.io/post/"},{"@type":"ListItem","position":2,"name":"[MySQL] 문법/함수 정리","item":"http://slow-wave.github.io/post/database/db_mysql_0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[MySQL] 문법/함수 정리","name":"[MySQL] 문법\/함수 정리","description":"코딩테스트 연습 할 때 Leetcode 플랫폼을 많이 이용합니다. discussion을 보면 문제에 대한 각자의 코드와 설명이 있는데 많은 사람들이 vote와 댓글 기능을 이용해 피드백을 줍니다. 보통은 칭찬이 많이 달려있는 글을 위주로 참고합니다. 별로인 것에 대해서는 가차없는 피드백이 적혀있다는 것도 도움이 되는 것 같습니다. 또 댓글로 시간복잡도 등에 대해서 토론하는 부분도 있어서 유용합니다.\n개인적으로 SQL을 공부 할 필요성을 느껴서 MySQL의 문법을 중심으로 problem과 code를 정리해봤습니다. discussion을 꼼꼼히 읽어서 어떻게 코딩하는 것이 좋은 방향인지도 알아보려고 합니다.","keywords":["DB","MySQL"],"articleBody":"코딩테스트 연습 할 때 Leetcode 플랫폼을 많이 이용합니다. discussion을 보면 문제에 대한 각자의 코드와 설명이 있는데 많은 사람들이 vote와 댓글 기능을 이용해 피드백을 줍니다. 보통은 칭찬이 많이 달려있는 글을 위주로 참고합니다. 별로인 것에 대해서는 가차없는 피드백이 적혀있다는 것도 도움이 되는 것 같습니다. 또 댓글로 시간복잡도 등에 대해서 토론하는 부분도 있어서 유용합니다.\n개인적으로 SQL을 공부 할 필요성을 느껴서 MySQL의 문법을 중심으로 problem과 code를 정리해봤습니다. discussion을 꼼꼼히 읽어서 어떻게 코딩하는 것이 좋은 방향인지도 알아보려고 합니다.\n0) SUBSTRING (problem) # 1667. Fix Names in a Table /* Input: Users table: +---------+-------+ | user_id | name | +---------+-------+ | 1 | aLice | | 2 | bOB | +---------+-------+ Output: +---------+-------+ | user_id | name | +---------+-------+ | 1 | Alice | | 2 | Bob | +---------+-------+ */ SELECT user_id, CONCAT(UPPER(SUBSTRING(name,1,1)), LOWER(SUBSTRING(name,2,LENGTH(name)))) as name FROM Users ORDER BY user_id; SUBSTRING(str,pos) pos ~ 위치까지의 문자열 반환 SUBSTRING(str,pos,len) pos ~ len 위치까지의 문자열 반환 1) GROUP_CONCAT (problem) /* Input: Activities table: +------------+------------+ | sell_date | product | +------------+------------+ | 2020-05-30 | Headphone | | 2020-06-01 | Pencil | | 2020-06-02 | Mask | | 2020-05-30 | Basketball | | 2020-06-01 | Bible | | 2020-06-02 | Mask | | 2020-05-30 | T-Shirt | +------------+------------+ Output: +------------+----------+------------------------------+ | sell_date | num_sold | products | +------------+----------+------------------------------+ | 2020-05-30 | 3 | Basketball,Headphone,T-shirt | | 2020-06-01 | 2 | Bible,Pencil | | 2020-06-02 | 1 | Mask | +------------+----------+------------------------------+ */ SELECT sell_date, COUNT(DISTINCT product) AS num_sold, GROUP_CONCAT(DISTINCT product ORDER BY product) AS products FROM Activities GROUP BY sell_date; 2) LIKE (problem) /* Input: Patients table: +------------+--------------+--------------+ | patient_id | patient_name | conditions | +------------+--------------+--------------+ | 1 | Daniel | YFEV COUGH | | 2 | Alice | | | 3 | Bob | DIAB100 MYOP | | 4 | George | ACNE DIAB100 | | 5 | Alain | DIAB201 | +------------+--------------+--------------+ Output: +------------+--------------+--------------+ | patient_id | patient_name | conditions | +------------+--------------+--------------+ | 3 | Bob | DIAB100 MYOP | | 4 | George | ACNE DIAB100 | +------------+--------------+--------------+ */ SELECT * FROM Patients WHERE conditions LIKE 'DIAB1%' or conditions LIKE '% DIAB1%'; 3) UNION ALL (problem) /* Input: Products table: +------------+--------+--------+--------+ | product_id | store1 | store2 | store3 | +------------+--------+--------+--------+ | 0 | 95 | 100 | 105 | | 1 | 70 | null | 80 | +------------+--------+--------+--------+ Output: +------------+--------+-------+ | product_id | store | price | +------------+--------+-------+ | 0 | store1 | 95 | | 0 | store2 | 100 | | 0 | store3 | 105 | | 1 | store1 | 70 | | 1 | store3 | 80 | +------------+--------+-------+ */ SELECT product_id, 'store1' store, store1 price FROM Products WHERE not store1 is null UNION ALL SELECT product_id, 'store2' store, store2 price FROM Products WHERE not store2 is null UNION ALL SELECT product_id, 'store3' store, store3 price FROM Products WHERE not store3 is null; 4) NOT IN, NOT EXISTS (problem) UNION vs. UNION ALL UNION만 사용하면 중복된 열 제거 \u0026 데이터 정렬 UNION ALL만 사용하면 중복된 열까지 출력 문제에서 ‘product_id’는 PK라고 했으므로 중복된 것이 존재할 수 없음. 따라서 UNION ALL을 사용해서 중복 제거 과정을 거치지 않는 것이 맞다고 판단함. /* Input: Visits +----------+-------------+ | visit_id | customer_id | +----------+-------------+ | 1 | 23 | | 2 | 9 | | 4 | 30 | | 5 | 54 | | 6 | 96 | | 7 | 54 | | 8 | 54 | +----------+-------------+ Transactions +----------------+----------+--------+ | transaction_id | visit_id | amount | +----------------+----------+--------+ | 2 | 5 | 310 | | 3 | 5 | 300 | | 9 | 5 | 200 | | 12 | 1 | 910 | | 13 | 2 | 970 | +----------------+----------+--------+ Output: +-------------+----------------+ | customer_id | count_no_trans | +-------------+----------------+ | 54 | 2 | | 30 | 1 | | 96 | 1 | +-------------+----------------+ */ # ANSWER1 - NOT IN SELECT customer_id, COUNT(visit_id) as count_no_trans FROM Visits WHERE visit_id NOT IN ( SELECT visit_id FROM Transactions ) GROUP BY customer_id #ANSWER2 - NOT EXISTS SELECT customer_id, COUNT(visit_id) as count_no_trans FROM Visits v WHERE NOT EXISTS ( SELECT visit_id FROM Transactions t WHERE t.visit_id = v.visit_id ) GROUP BY customer_id in vs. exists in 연산자 : sub query → main query 순서로 처리 sub에서 main의 정보를 가져올 수 없기 때문에 조건을 각각 설정함. exists 연산자 : main query → sub query 순서로 처리 sub에서 main의 정보를 가져와 모든 조건을 한번에 설정함. 참고 자료 [blog] UNION과 UNION ALL 의 차이 및 주의 사항 [blog] [MS SQL Server] #11_ IN / EXISTS / NOT IN / NOT EXISTS 비교 [blog] [MySQL] in 연산자와 exists 연산자 의 차이 ","wordCount":"764","inLanguage":"en","datePublished":"2022-10-21T01:43:36+09:00","dateModified":"2022-10-21T01:43:36+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://slow-wave.github.io/post/database/db_mysql_0/"},"publisher":{"@type":"Organization","name":"slow-wave blog","logo":{"@type":"ImageObject","url":"http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://slow-wave.github.io/ accesskey=h title="Home (Alt + H)"><img src=http://slow-wave.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://slow-wave.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=http://slow-wave.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=http://slow-wave.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://slow-wave.github.io/>Home</a>&nbsp;»&nbsp;<a href=http://slow-wave.github.io/post/>Posts</a></div><h1 class=post-title>[MySQL] 문법/함수 정리</h1><div class=post-meta><span title='2022-10-21 01:43:36 +0900 KST'>October 21, 2022</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;764 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/post/database/db_mysql_0.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#0-substring-problemhttpsleetcodecomproblemsfix-names-in-a-tableenvtypestudy-planidsql-i>0) SUBSTRING (<a href="https://leetcode.com/problems/fix-names-in-a-table/?envType=study-plan&id=sql-i">problem</a>)</a></li><li><a href=#1-group_concat-problemhttpsleetcodecomproblemsgroup-sold-products-by-the-date>1) GROUP_CONCAT (<a href=https://leetcode.com/problems/group-sold-products-by-the-date/>problem</a>)</a></li><li><a href=#2-like-problemhttpsleetcodecomproblemspatients-with-a-conditionenvtypestudy-planidsql-i>2) LIKE (<a href="https://leetcode.com/problems/patients-with-a-condition/?envType=study-plan&id=sql-i">problem</a>)</a></li><li><a href=#3-union-all-problemhttpsleetcodecomproblemsrearrange-products-table>3) UNION ALL (<a href=https://leetcode.com/problems/rearrange-products-table/>problem</a>)</a></li><li><a href=#4-not-in-not-exists-problemhttpsleetcodecomproblemscustomer-who-visited-but-did-not-make-any-transactions>4) NOT IN, NOT EXISTS (<a href=https://leetcode.com/problems/customer-who-visited-but-did-not-make-any-transactions/>problem</a>)</a></li><li><a href=#참고-자료>참고 자료</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>코딩테스트 연습 할 때 Leetcode 플랫폼을 많이 이용합니다. discussion을 보면 문제에 대한 각자의 코드와 설명이 있는데 많은 사람들이 vote와 댓글 기능을 이용해 피드백을 줍니다. 보통은 칭찬이 많이 달려있는 글을 위주로 참고합니다. 별로인 것에 대해서는 가차없는 피드백이 적혀있다는 것도 도움이 되는 것 같습니다. 또 댓글로 시간복잡도 등에 대해서 토론하는 부분도 있어서 유용합니다.</p><p>개인적으로 SQL을 공부 할 필요성을 느껴서 MySQL의 문법을 중심으로 problem과 code를 정리해봤습니다. discussion을 꼼꼼히 읽어서 어떻게 코딩하는 것이 좋은 방향인지도 알아보려고 합니다.</p><h3 id=0-substring-problemhttpsleetcodecomproblemsfix-names-in-a-tableenvtypestudy-planidsql-i>0) SUBSTRING (<a href="https://leetcode.com/problems/fix-names-in-a-table/?envType=study-plan&id=sql-i">problem</a>)<a hidden class=anchor aria-hidden=true href=#0-substring-problemhttpsleetcodecomproblemsfix-names-in-a-tableenvtypestudy-planidsql-i>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=o>#</span><span class=w> </span><span class=mi>1667</span><span class=p>.</span><span class=w> </span><span class=n>Fix</span><span class=w> </span><span class=k>Names</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>Table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Input: 
</span></span></span><span class=line><span class=cl><span class=cm>Users table:
</span></span></span><span class=line><span class=cl><span class=cm>+---------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>| user_id | name  |
</span></span></span><span class=line><span class=cl><span class=cm>+---------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>| 1       | aLice |
</span></span></span><span class=line><span class=cl><span class=cm>| 2       | bOB   |
</span></span></span><span class=line><span class=cl><span class=cm>+---------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>Output: 
</span></span></span><span class=line><span class=cl><span class=cm>+---------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>| user_id | name  |
</span></span></span><span class=line><span class=cl><span class=cm>+---------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>| 1       | Alice |
</span></span></span><span class=line><span class=cl><span class=cm>| 2       | Bob   |
</span></span></span><span class=line><span class=cl><span class=cm>+---------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>CONCAT</span><span class=p>(</span><span class=k>UPPER</span><span class=p>(</span><span class=k>SUBSTRING</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)),</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=k>SUBSTRING</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=k>LENGTH</span><span class=p>(</span><span class=n>name</span><span class=p>))))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Users</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>user_id</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><ul><li><a href=https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substring>SUBSTRING(<em><strong>str</strong></em>,<em><strong>pos</strong></em>)</a><ul><li>pos ~ 위치까지의 문자열 반환</li></ul></li><li><a href=https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substring>SUBSTRING(<em><strong>str</strong></em>,<em><strong>pos</strong></em>,<em><strong>len</strong></em>)</a><ul><li>pos ~ len 위치까지의 문자열 반환</li></ul></li></ul><h3 id=1-group_concat-problemhttpsleetcodecomproblemsgroup-sold-products-by-the-date>1) GROUP_CONCAT (<a href=https://leetcode.com/problems/group-sold-products-by-the-date/>problem</a>)<a hidden class=anchor aria-hidden=true href=#1-group_concat-problemhttpsleetcodecomproblemsgroup-sold-products-by-the-date>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Input: 
</span></span></span><span class=line><span class=cl><span class=cm>Activities table:
</span></span></span><span class=line><span class=cl><span class=cm>+------------+------------+
</span></span></span><span class=line><span class=cl><span class=cm>| sell_date  | product     |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+------------+
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-05-30 | Headphone  |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-06-01 | Pencil     |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-06-02 | Mask       |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-05-30 | Basketball |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-06-01 | Bible      |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-06-02 | Mask       |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-05-30 | T-Shirt    |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+------------+
</span></span></span><span class=line><span class=cl><span class=cm>Output: 
</span></span></span><span class=line><span class=cl><span class=cm>+------------+----------+------------------------------+
</span></span></span><span class=line><span class=cl><span class=cm>| sell_date  | num_sold | products                     |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+----------+------------------------------+
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-05-30 | 3        | Basketball,Headphone,T-shirt |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-06-01 | 2        | Bible,Pencil                 |
</span></span></span><span class=line><span class=cl><span class=cm>| 2020-06-02 | 1        | Mask                         |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+----------+------------------------------+
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>sell_date</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>COUNT</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>product</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>num_sold</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>GROUP_CONCAT</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>product</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>product</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>products</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Activities</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>sell_date</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 id=2-like-problemhttpsleetcodecomproblemspatients-with-a-conditionenvtypestudy-planidsql-i>2) LIKE (<a href="https://leetcode.com/problems/patients-with-a-condition/?envType=study-plan&id=sql-i">problem</a>)<a hidden class=anchor aria-hidden=true href=#2-like-problemhttpsleetcodecomproblemspatients-with-a-conditionenvtypestudy-planidsql-i>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Input: 
</span></span></span><span class=line><span class=cl><span class=cm>Patients table:
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------------+--------------+
</span></span></span><span class=line><span class=cl><span class=cm>| patient_id | patient_name | conditions   |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------------+--------------+
</span></span></span><span class=line><span class=cl><span class=cm>| 1          | Daniel       | YFEV COUGH   |
</span></span></span><span class=line><span class=cl><span class=cm>| 2          | Alice        |              |
</span></span></span><span class=line><span class=cl><span class=cm>| 3          | Bob          | DIAB100 MYOP |
</span></span></span><span class=line><span class=cl><span class=cm>| 4          | George       | ACNE DIAB100 |
</span></span></span><span class=line><span class=cl><span class=cm>| 5          | Alain        | DIAB201      |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------------+--------------+
</span></span></span><span class=line><span class=cl><span class=cm>Output: 
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------------+--------------+
</span></span></span><span class=line><span class=cl><span class=cm>| patient_id | patient_name | conditions   |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------------+--------------+
</span></span></span><span class=line><span class=cl><span class=cm>| 3          | Bob          | DIAB100 MYOP |
</span></span></span><span class=line><span class=cl><span class=cm>| 4          | George       | ACNE DIAB100 | 
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------------+--------------+
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>Patients</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>conditions</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;DIAB1%&#39;</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>conditions</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;% DIAB1%&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 id=3-union-all-problemhttpsleetcodecomproblemsrearrange-products-table>3) UNION ALL (<a href=https://leetcode.com/problems/rearrange-products-table/>problem</a>)<a hidden class=anchor aria-hidden=true href=#3-union-all-problemhttpsleetcodecomproblemsrearrange-products-table>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Input: 
</span></span></span><span class=line><span class=cl><span class=cm>Products table:
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------+--------+--------+
</span></span></span><span class=line><span class=cl><span class=cm>| product_id | store1 | store2 | store3 |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------+--------+--------+
</span></span></span><span class=line><span class=cl><span class=cm>| 0          | 95     | 100    | 105    |
</span></span></span><span class=line><span class=cl><span class=cm>| 1          | 70     | null   | 80     |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------+--------+--------+
</span></span></span><span class=line><span class=cl><span class=cm>Output: 
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>| product_id | store  | price |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>| 0          | store1 | 95    |
</span></span></span><span class=line><span class=cl><span class=cm>| 0          | store2 | 100   |
</span></span></span><span class=line><span class=cl><span class=cm>| 0          | store3 | 105   |
</span></span></span><span class=line><span class=cl><span class=cm>| 1          | store1 | 70    |
</span></span></span><span class=line><span class=cl><span class=cm>| 1          | store3 | 80    |
</span></span></span><span class=line><span class=cl><span class=cm>+------------+--------+-------+
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>product_id</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;store1&#39;</span><span class=w> </span><span class=n>store</span><span class=p>,</span><span class=w> </span><span class=n>store1</span><span class=w> </span><span class=n>price</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Products</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=n>store1</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UNION</span><span class=w> </span><span class=k>ALL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>product_id</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;store2&#39;</span><span class=w> </span><span class=n>store</span><span class=p>,</span><span class=w> </span><span class=n>store2</span><span class=w> </span><span class=n>price</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Products</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=n>store2</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UNION</span><span class=w> </span><span class=k>ALL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>product_id</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;store3&#39;</span><span class=w> </span><span class=n>store</span><span class=p>,</span><span class=w> </span><span class=n>store3</span><span class=w> </span><span class=n>price</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Products</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=n>store3</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 id=4-not-in-not-exists-problemhttpsleetcodecomproblemscustomer-who-visited-but-did-not-make-any-transactions>4) NOT IN, NOT EXISTS (<a href=https://leetcode.com/problems/customer-who-visited-but-did-not-make-any-transactions/>problem</a>)<a hidden class=anchor aria-hidden=true href=#4-not-in-not-exists-problemhttpsleetcodecomproblemscustomer-who-visited-but-did-not-make-any-transactions>#</a></h3><ul><li>UNION vs. UNION ALL<ul><li>UNION만 사용하면 중복된 열 제거 & 데이터 정렬</li><li>UNION ALL만 사용하면 중복된 열까지 출력</li></ul></li><li>문제에서 ‘product_id’는 PK라고 했으므로 중복된 것이 존재할 수 없음. 따라서 UNION ALL을 사용해서 중복 제거 과정을 거치지 않는 것이 맞다고 판단함.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/* Input: 
</span></span></span><span class=line><span class=cl><span class=cm>Visits
</span></span></span><span class=line><span class=cl><span class=cm>+----------+-------------+
</span></span></span><span class=line><span class=cl><span class=cm>| visit_id | customer_id |
</span></span></span><span class=line><span class=cl><span class=cm>+----------+-------------+
</span></span></span><span class=line><span class=cl><span class=cm>| 1        | 23          |
</span></span></span><span class=line><span class=cl><span class=cm>| 2        | 9           |
</span></span></span><span class=line><span class=cl><span class=cm>| 4        | 30          |
</span></span></span><span class=line><span class=cl><span class=cm>| 5        | 54          |
</span></span></span><span class=line><span class=cl><span class=cm>| 6        | 96          |
</span></span></span><span class=line><span class=cl><span class=cm>| 7        | 54          |
</span></span></span><span class=line><span class=cl><span class=cm>| 8        | 54          |
</span></span></span><span class=line><span class=cl><span class=cm>+----------+-------------+
</span></span></span><span class=line><span class=cl><span class=cm>Transactions
</span></span></span><span class=line><span class=cl><span class=cm>+----------------+----------+--------+
</span></span></span><span class=line><span class=cl><span class=cm>| transaction_id | visit_id | amount |
</span></span></span><span class=line><span class=cl><span class=cm>+----------------+----------+--------+
</span></span></span><span class=line><span class=cl><span class=cm>| 2              | 5        | 310    |
</span></span></span><span class=line><span class=cl><span class=cm>| 3              | 5        | 300    |
</span></span></span><span class=line><span class=cl><span class=cm>| 9              | 5        | 200    |
</span></span></span><span class=line><span class=cl><span class=cm>| 12             | 1        | 910    |
</span></span></span><span class=line><span class=cl><span class=cm>| 13             | 2        | 970    |
</span></span></span><span class=line><span class=cl><span class=cm>+----------------+----------+--------+
</span></span></span><span class=line><span class=cl><span class=cm>Output: 
</span></span></span><span class=line><span class=cl><span class=cm>+-------------+----------------+
</span></span></span><span class=line><span class=cl><span class=cm>| customer_id | count_no_trans |
</span></span></span><span class=line><span class=cl><span class=cm>+-------------+----------------+
</span></span></span><span class=line><span class=cl><span class=cm>| 54          | 2              |
</span></span></span><span class=line><span class=cl><span class=cm>| 30          | 1              |
</span></span></span><span class=line><span class=cl><span class=cm>| 96          | 1              |
</span></span></span><span class=line><span class=cl><span class=cm>+-------------+----------------+ */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=n>ANSWER1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>IN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>customer_id</span><span class=p>,</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>visit_id</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>count_no_trans</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Visits</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>visit_id</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>SELECT</span><span class=w> </span><span class=n>visit_id</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>Transactions</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>customer_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=n>ANSWER2</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>customer_id</span><span class=p>,</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>visit_id</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>count_no_trans</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Visits</span><span class=w> </span><span class=n>v</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>SELECT</span><span class=w> </span><span class=n>visit_id</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>Transactions</span><span class=w> </span><span class=n>t</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>WHERE</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>visit_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>v</span><span class=p>.</span><span class=n>visit_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>customer_id</span><span class=w>
</span></span></span></code></pre></div><ul><li>in vs. exists<ul><li>in 연산자 : sub query → main query 순서로 처리<ul><li>sub에서 main의 정보를 가져올 수 없기 때문에 조건을 각각 설정함.</li></ul></li><li>exists 연산자 : main query → sub query 순서로 처리<ul><li>sub에서 main의 정보를 가져와 모든 조건을 한번에 설정함.</li></ul></li></ul></li></ul><h3 id=참고-자료>참고 자료<a hidden class=anchor aria-hidden=true href=#참고-자료>#</a></h3><ul><li>[blog] <a href=http://intomysql.blogspot.com/2011/01/union-union-all.html>UNION과 UNION ALL 의 차이 및 주의 사항</a></li><li>[blog] <a href=https://doorbw.tistory.com/222>[MS SQL Server] #11_ IN / EXISTS / NOT IN / NOT EXISTS 비교</a></li><li>[blog] <a href=https://junco.tistory.com/71>[MySQL] in 연산자와 exists 연산자 의 차이</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://slow-wave.github.io/tags/db/>DB</a></li><li><a href=http://slow-wave.github.io/tags/mysql/>MySQL</a></li></ul><nav class=paginav><a class=prev href=http://slow-wave.github.io/post/database/db_mysql_1/><span class=title>« Prev</span><br><span>[MySQL] 활용</span></a>
<a class=next href=http://slow-wave.github.io/post/etc/etc_vm_0/><span class=title>Next »</span><br><span>[config]Virtual Box, Vagrant를 이용한 가상 머신 환경 구축</span></a></nav></footer><script src=https://utteranc.es/client.js repo=slow-wave/blog_comments issue-term=pathname theme=github-dark crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=http://slow-wave.github.io/>slow-wave blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>