<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[토비의 스프링 3.1] 1.1~1.4 정리 | slow-wave blog</title><meta name=keywords content="Spring,Backend,Java"><meta name=description content="스프링이란 무엇인가? 스프링은 자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워크다. 스프링을 사용한다는 것은 다음의 세 가지 요소를 적극적으로 활용해서 애플리케이션을 개발한다는 뜻이다. 스프링 개발 철학 중 하나는 ‘항상 프레임워크 기반의 접근 방법을 사용하라’이다. 프레임워크의 가장 중요한 목적은 개발자가 일정한 틀을 따라 효과적으로 애플리케이션을 개발하도록 돕는 것이다. 따라서 프레임워크를 잘 이해하려면 프레임워크를 사용했을 때 애플리케이션 코드가 어떻게 만들어지는지 자세히 살펴봐야 한다. 1) 애플리케이션의 기본 틀 - 스프링 컨테이너 스프링은 스프링 컨테이너라고 불리는 스프링 런타임 엔진을 제공한다."><meta name=author content="Me"><link rel=canonical href=http://slow-wave.github.io/post/spring/spring_toby_0/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6F557TM67S"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6F557TM67S",{anonymize_ip:!1})}</script><meta property="og:title" content="[토비의 스프링 3.1] 1.1~1.4 정리"><meta property="og:description" content="스프링이란 무엇인가? 스프링은 자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워크다. 스프링을 사용한다는 것은 다음의 세 가지 요소를 적극적으로 활용해서 애플리케이션을 개발한다는 뜻이다. 스프링 개발 철학 중 하나는 ‘항상 프레임워크 기반의 접근 방법을 사용하라’이다. 프레임워크의 가장 중요한 목적은 개발자가 일정한 틀을 따라 효과적으로 애플리케이션을 개발하도록 돕는 것이다. 따라서 프레임워크를 잘 이해하려면 프레임워크를 사용했을 때 애플리케이션 코드가 어떻게 만들어지는지 자세히 살펴봐야 한다. 1) 애플리케이션의 기본 틀 - 스프링 컨테이너 스프링은 스프링 컨테이너라고 불리는 스프링 런타임 엔진을 제공한다."><meta property="og:type" content="article"><meta property="og:url" content="http://slow-wave.github.io/post/spring/spring_toby_0/"><meta property="og:image" content="http://slow-wave.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-11-26T00:08:02+09:00"><meta property="article:modified_time" content="2022-11-26T00:08:02+09:00"><meta property="og:site_name" content="slow-wave blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://slow-wave.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[토비의 스프링 3.1] 1.1~1.4 정리"><meta name=twitter:description content="스프링이란 무엇인가? 스프링은 자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워크다. 스프링을 사용한다는 것은 다음의 세 가지 요소를 적극적으로 활용해서 애플리케이션을 개발한다는 뜻이다. 스프링 개발 철학 중 하나는 ‘항상 프레임워크 기반의 접근 방법을 사용하라’이다. 프레임워크의 가장 중요한 목적은 개발자가 일정한 틀을 따라 효과적으로 애플리케이션을 개발하도록 돕는 것이다. 따라서 프레임워크를 잘 이해하려면 프레임워크를 사용했을 때 애플리케이션 코드가 어떻게 만들어지는지 자세히 살펴봐야 한다. 1) 애플리케이션의 기본 틀 - 스프링 컨테이너 스프링은 스프링 컨테이너라고 불리는 스프링 런타임 엔진을 제공한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://slow-wave.github.io/post/"},{"@type":"ListItem","position":2,"name":"[토비의 스프링 3.1] 1.1~1.4 정리","item":"http://slow-wave.github.io/post/spring/spring_toby_0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[토비의 스프링 3.1] 1.1~1.4 정리","name":"[토비의 스프링 3.1] 1.1~1.4 정리","description":"스프링이란 무엇인가? 스프링은 자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워크다. 스프링을 사용한다는 것은 다음의 세 가지 요소를 적극적으로 활용해서 애플리케이션을 개발한다는 뜻이다. 스프링 개발 철학 중 하나는 ‘항상 프레임워크 기반의 접근 방법을 사용하라’이다. 프레임워크의 가장 중요한 목적은 개발자가 일정한 틀을 따라 효과적으로 애플리케이션을 개발하도록 돕는 것이다. 따라서 프레임워크를 잘 이해하려면 프레임워크를 사용했을 때 애플리케이션 코드가 어떻게 만들어지는지 자세히 살펴봐야 한다. 1) 애플리케이션의 기본 틀 - 스프링 컨테이너 스프링은 스프링 컨테이너라고 불리는 스프링 런타임 엔진을 제공한다.","keywords":["Spring","Backend","Java"],"articleBody":"스프링이란 무엇인가? 스프링은 자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워크다. 스프링을 사용한다는 것은 다음의 세 가지 요소를 적극적으로 활용해서 애플리케이션을 개발한다는 뜻이다. 스프링 개발 철학 중 하나는 ‘항상 프레임워크 기반의 접근 방법을 사용하라’이다. 프레임워크의 가장 중요한 목적은 개발자가 일정한 틀을 따라 효과적으로 애플리케이션을 개발하도록 돕는 것이다. 따라서 프레임워크를 잘 이해하려면 프레임워크를 사용했을 때 애플리케이션 코드가 어떻게 만들어지는지 자세히 살펴봐야 한다. 1) 애플리케이션의 기본 틀 - 스프링 컨테이너 스프링은 스프링 컨테이너라고 불리는 스프링 런타임 엔진을 제공한다. 2) 공통 프로그래밍 모델 - IoC/DI, 서비스 추상화, AOP 스프링은 세 가지 핵심 프로그래밍 모델을 지원한다.\nIoC/DI : 오브젝트의 생명주기와 의존관계에 대한 프로그래밍 모델이다. 서비스 추상화 : 구체적인 기술과 환경에 종속되지 않도록 유연한 추상 계층을 두는 방법이다. AOP : 애플리케이션 코드에 산재해서 나타나는 부가적인 기능을 독립적으로 모듈화하는 프로그래밍 모델이다. 3) 기술 API 스프링의 성공 요인 단순함 스프링은 이 잃어버린 객체지향 언어의 장점을 다시 개발자들이 살릴 수 있도록 도와주는 도구다. 스프링이 강력하게 주장하는 것은 가장 단순한 객체지향적인 개발 모델인 POJO 프로그래밍이다. 유연성 스프링은 다른 많은 프레임워크와 편리하게 접목돼서 사용할 수 있다. 1장 오브젝트와 의존관계 스프링이 자바에서 가장 중요하게 가치를 두는 것은 바로 객체지향 프로그래밍이 가능한 언어라는 점이다. 스프링이 관심을 두는 대상은 오브젝트다. 애플리케이션에서 오브젝트가 생성되고 다른 오브젝트와 관계를 맺고, 사용되고, 소멸하기까지의 전 과정을 진지하게 생각해볼 필요가 있다. 오브젝트에 대한 관심은 오브젝트의 설계로 발전하게 된다. 객체지향 설계의 기초와 원칙을 비롯해서, 디자인 패턴, 리팩토링, 단위테스트와 같은 오브젝트 설계와 구현에 관한 여러 가지 응용 기술과 지식이 요구된다. 1.2 DAO의 분리 1.2.1 관심사의 분리 개발자가 객체를 설계할 때 가장 염두에 둬야 할 사항은 바로 미래의 변화를 어떻게 대비할 것인가이다.\n객체지향 설계와 프로그래밍 이전의 절차적 프로그래밍 패러다임에 비해 초기에 좀 더 많은, 번거로운 작업을 요구하는 이유는 객체지향 기술 자체가 지니는, 변화에 효과적으로 대처할 수 있다는 기술적인 특징 때문이다.\n어떻게 변경이 일어날 때 필요한 작업을 최소화하고, 그 변경이 다른 곳에 문제를 일으키지 않게 할 수 있을까? 그것은 분리와 확장을 고려한 설계가 있었기 때문이다.\n모든 변경과 발전은 한 번에 한 가지 관심사항에 집중해서 일어난다.\n프로그래밍의 기초 개념 중에 관심사의 분리라는게 있다.\n→ 관심이 같은 것끼리는 하나의 객체 안으로 또는 친한 객체로 모이게 하고, 관심이 다른 것은 가능한 한 따로 떨어져서 서로 영향을 주지 않도록 분리하는 것이다.\n1.2.2 커넥션 만들기의 추출 변경사항에 대한 검증: 리팩토링과 테스트\n여러 메소드에 중복돼서 등장하는 특정 관심사항이 담긴 코드를 별도의 메소드로 분리해냈다. → 리팩토링 공통의 기능을 담당하는 메소드로 중복된 코드를 뽑아내는 것을 리팩토링에서는 메소드 추출 기법이라고 한다. 1.2.3 DB 커텍션 만들기의 독립 상속을 통한 확장\n템플릿 메소드 패턴 - 슈퍼클래스에 기본적인 로직의 흐름을 만들고, 그 기능의 일부를 추상 메소드나 필요에 맞게 구현해서 사용하도록 하는 방법이다. 팩토리 메소드 패턴 - 서브클래스에서 구체적인 오브젝트 생성 방법을 결정하게하는 것이다. 디자인 패턴은 설계 전략이기도 하지만 커뮤니케이션 수단이기도 하다. 1.3 DAO의 확장 1.3.4 원칙과 패턴 개방 폐쇄 원칙(OCP, Open-Closed Principle)\n개방 폐쇄 원칙은 깔끔한 설계를 위해 적용 가능한 객체지향 설계 원칙 중 하나다. 간단히 정의하면 ‘클래스나 모듈은 확장에는 열려 있어야 하고 변경에는 닫혀 있어야 한다.’라고 할 수 있다. 높은 응집도와 낮은 결합도\n개방 폐쇄 원칙은 높은 응집도와 낮은 결합도(high coherence and low coupling)라는 소프트웨어 개발의 고전적인 원리로도 설명이 가능하다. 높은 응집도 하나의 모듈, 클래스가 하나의 책임 또는 관심사에만 집중되어 있다. 변화가 일어날 때 해당 모듈에서 변하는 부분이 크다. 낮은 결합도 결합도란 ‘하나의 오브젝트가 변경이 일어날 때에 관계를 맺고 있는 다른 오브젝트에게 변화를 요구하는 정도’라고 할 수 있다. 책임과 관심사가 다른 오브젝트 또는 모듈과는 낮은 결합도, 즉 느슨하게 연결된 형태를 유지하는 것이 바람직하다. 결합도가 낮아지면 변화에 대응하는 속도가 높아지고, 구성이 깔끔해진다. 확장도 편리하다. 전략 패턴\n전략 패턴은 자신의 기능 맥락에서, 필요에 따라 변경이 필요한 알고리즘을 인터페이스를 통해 통째로 외부로 분리시키고, 이를 구현한 구체적인 알고리즘 클래스를 필요에 따라 바꿔서 사용할 수 있게 하는 디자인 패턴이다. 스프링이란 객체지향적 설계 원칙과 디자인 패턴에 나타난 장점을 자연스럽게 개발자들이 활용할 수 있게 해주는 프레임워크다. 1.4 제어의 역전(IoC) 1.4.3 제어권의 이전을 통한 제어관계 역전 제어의 역적이라는 건, 간단히 프로그램의 제어 흐름 구조가 뒤바뀌는 것이라고 설명할 수 있다. 일반적인 프로그램의 흐름 main() 메소드와 같이 프로그램이 시작되는 지점에서 다음에 사용할 오브젝트 결정 → 결정한 오브젝트 생성 → 만들어진 오브젝트에 있는 메소드 호출 → 오브젝트 메소드 안에서 다음에 사용할 것을 결정하고 호출하는 식의 작업 반복 모든 오브젝트가 능동적으로 자신이 사용할 클래스를 결정하고, 언제 어떻게 오브젝트를 만들지를 스스로 관장한다. 제어의 역전에서는 오브젝트가 자신이 사용할 오브젝트를 스스로 선택하지 않는다. 당연히 생성하지도 않는다. 모든 제어 권한을 자신이 아닌 다른 대상에게 위임한다. 프레임워크도 제어의 역전 개념이 적용된 대표적인 기술이다. 라이브러리 vs. 프레임워크 라이브러리 : 라이브러리를 사용하는 애플리케이션 코드는 애플리케이션 흐름을 제어한다. 프레임워크 : 거꾸로 애플리케이션 코드가 프레임워크에 의해 사용된다. 스프링은 IoC를 모든 기능의 기초가 되는 기반기술로 삼고 있으며, IoC를 극한까지 적용하고 있는 프레임워크다. Code 1-1. 사용자 정보 저장용 자바빈 User 클래스 package springbook1; public class User { String id; String name; String password; public String getId() { return id; } public void setId(String id) { this.id = id; } public String getName() { return name; } public void setName(String name) { this.name = name; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } } 1-2. JDBC를 이용한 등록과 조회 기능이 있는 UserDao 클래스 다음 코드의 문제점 add()와 get() method 부분에 DB connection 부분이 중복되어있음. 예외 처리 package springbook1; import java.sql.Connection; import java.sql.DriverManager; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; public class UserDao { public void add(User user) throws ClassNotFoundException, SQLException { Class.forName(\"com.mysql.jdbc.Driver\"); Connection c = DriverManager.getConnection( \"jdbc:mysql://localhost/test\", \"spring\", \"book\"); PreparedStatement ps = c.prepareStatement( \"insert into users(id, name, password) values(?,?,?)\"); ps.setString(1, user.getId()); ps.setString(2, user.getName()); ps.setString(3, user.getPassword()); ps.executeUpdate(); ps.close(); c.close(); } public User get(String id) throws ClassNotFoundException, SQLException { Class.forName(\"com.mysql.jdbc.Driver\"); Connection c = DriverManager.getConnection( \"jdbc:mysql://localhost/test\", \"spring\", \"book\"); PreparedStatement ps = c.prepareStatement( \"select * from users where id = ?\"); ps.setString(1,id); ResultSet rs = ps.executeQuery(); rs.next(); User user = new User(); user.setId(rs.getString(\"id\")); user.setName(rs.getString(\"name\")); user.setPassword(rs.getString(\"password\")); rs.close(); ps.close(); c.close(); return user; } } 1-3. 테스트용 main() 메소드 package springbook1; import java.sql.SQLException; public class UserDaoTest { public static void main(String[] args) throws ClassNotFoundException, SQLException { // TODO Auto-generated method stub UserDao dao = new UserDao(); User user = new User(); user.setId(\"ground\"); user.setName(\"\"); user.setPassword(\"hi2\"); dao.add(user); System.out.println(user.getId() + \"등록 성공\"); User user2 = dao.get(user.getId()); System.out.println(user2.getName()); System.out.println(user2.getPassword()); System.out.println(user2.getId() + \"조회 성공\"); } } [리팩토링1] 중복 코드의 메소드 추출을 통해 코드 분리 1-4. getConnection() 메소드를 추출해서 중복을 제거한 UserDao package springbook1; import java.sql.Connection; import java.sql.DriverManager; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; public class UserDao { public void add(User user) throws ClassNotFoundException, SQLException { Connection c = getConnection(); PreparedStatement ps = c.prepareStatement( \"insert into users(id, name, password) values(?,?,?)\"); ps.setString(1, user.getId()); ps.setString(2, user.getName()); ps.setString(3, user.getPassword()); ps.executeUpdate(); ps.close(); c.close(); } public User get(String id) throws ClassNotFoundException, SQLException { Connection c = getConnection(); PreparedStatement ps = c.prepareStatement( \"select * from users where id = ?\"); ps.setString(1,id); ResultSet rs = ps.executeQuery(); rs.next(); User user = new User(); user.setId(rs.getString(\"id\")); user.setName(rs.getString(\"name\")); user.setPassword(rs.getString(\"password\")); rs.close(); ps.close(); c.close(); return user; } private Connection getConnection() throws ClassNotFoundException, SQLException { Class.forName(\"com.mysql.jdbc.Driver\"); Connection c = DriverManager.getConnection( \"jdbc:mysql://localhost/test\", \"spring\", \"book\"); return c; } } [리팩토링2] 상속을 통한 확장 (템플릿 메소드 패턴 \u0026 팩토리 메소드 패턴 적용) 클래스 계층구조를 통해 두 개의 관심이 독립적으로 분리되면서 변경 작업이 용이해짐. 1.5. 상속을 통한 확장 방법이 제공되는 UserDao 다음 코드의 문제점 만약 이미 UserDao가 다른 목적을 위해 상속을 사용하고 있다면? 자바는 클래스의 다중상속을 허용하지 않는다. 상속을 통한 상하위 클래스의 관계는 생각보다 밀접하다. 확장된 기능인 DB 커넥션을 생성하는 코드를 다른 DAO 클래스에 적용할 수 없다. package springbook1; import java.sql.Connection; import java.sql.DriverManager; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; public abstract class UserDao { public void add(User user) throws ClassNotFoundException, SQLException { Connection c = getConnection(); PreparedStatement ps = c.prepareStatement( \"insert into users(id, name, password) values(?,?,?)\"); ps.setString(1, user.getId()); ps.setString(2, user.getName()); ps.setString(3, user.getPassword()); ps.executeUpdate(); ps.close(); c.close(); } public User get(String id) throws ClassNotFoundException, SQLException { Connection c = getConnection(); PreparedStatement ps = c.prepareStatement( \"select * from users where id = ?\"); ps.setString(1,id); ResultSet rs = ps.executeQuery(); rs.next(); User user = new User(); user.setId(rs.getString(\"id\")); user.setName(rs.getString(\"name\")); user.setPassword(rs.getString(\"password\")); rs.close(); ps.close(); c.close(); return user; } // getConnection() 메소드는 Connection 타입 오브젝트를 생성한다는 기능을 정의해놓은 추상 메소드 public abstract Connection getConnection() throws ClassNotFoundException, SQLException; public class NUserDao extends UserDao { // 서브클래스의 getConnection() 메소드는 어떤 Connection 클래스의 오브젝트를 어떻게 생성할 것인지 결정하는 방법 public Connection getConnection() throws ClassNotFoundException, SQLException { //N사 DB connection code\treturn c; } } public class DUserDao extends UserDao { public Connection getConnection() throws ClassNotFoundException, SQLException { //D사 DB connection code\treturn c; } } } [리팩토링3] 클래스의 분리 1.6 독립된 SimpleConnectionMaker를 사용하게 만든 UserDao 1.7 독립시킨 DB연결 기능인 SimpleConnectionMaker 다음 코드의 문제점 고객이 DB 커넥션을 가져오는 방법을 자유롭게 확장하기가 어려움. → UserDao가 SimpleConnectionMaker라는 특정 클래스와 그 코드에 종속적임. package springbook1; import java.sql.Connection; import java.sql.DriverManager; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; public abstract class UserDao { private SimpleConnectionMaker simpleConnectionMaker; public UserDao() { simpleConnectionMaker = new SimpleConnectionMaker(); } public void add(User user) throws ClassNotFoundException, SQLException { Connection c = simpleConnectionMaker.makeNewConnection(); PreparedStatement ps = c.prepareStatement( \"insert into users(id, name, password) values(?,?,?)\"); ps.setString(1, user.getId()); ps.setString(2, user.getName()); ps.setString(3, user.getPassword()); ps.executeUpdate(); ps.close(); c.close(); } public User get(String id) throws ClassNotFoundException, SQLException { Connection c = simpleConnectionMaker.makeNewConnection(); PreparedStatement ps = c.prepareStatement( \"select * from users where id = ?\"); ps.setString(1,id); ResultSet rs = ps.executeQuery(); rs.next(); User user = new User(); user.setId(rs.getString(\"id\")); user.setName(rs.getString(\"name\")); user.setPassword(rs.getString(\"password\")); rs.close(); ps.close(); c.close(); return user; } public class SimpleConnectionMaker { public Connection makeNewConnection() throws ClassNotFoundException, SQLException { Class.forName(\"com.mysql.jdbc.Driver\"); Connection c = DriverManager.getConnection( \"jdbc:mysql://localhost/test\", \"spring\", \"book\"); return c; } }\t} [리팩토링4] 인터페이스 도입 1-8. ConnectionMaker 인터페이스 1-9. ConnectionMaker 구현 클래스 1-10. ConnectionMaker 인터페이스를 사용하도록 개선한 UserDao 다음 코드의 문제점 UserDao의 다른 모든 곳에서는 인터페이스를 이용하게 만들어서 DB 커넥션을 제공하는 클래스에 대한 구체적인 정보는 모두 제거가 가능했지만, 초기에 한 번 어떤 클래스의 오브젝트를 생성할지를 결정하는 생성자의 코드는 제거 되지 않음. package springbook1; import java.sql.Connection; import java.sql.DriverManager; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; public abstract class UserDao { private ConnectionMaker connectionMaker; public UserDao() { connectionMaker = new DConnectionMaker(); } public void add(User user) throws ClassNotFoundException, SQLException { Connection c = connectionMaker.makeConnection(); PreparedStatement ps = c.prepareStatement( \"insert into users(id, name, password) values(?,?,?)\"); ps.setString(1, user.getId()); ps.setString(2, user.getName()); ps.setString(3, user.getPassword()); ps.executeUpdate(); ps.close(); c.close(); } public User get(String id) throws ClassNotFoundException, SQLException { Connection c = connectionMaker.makeConnection(); PreparedStatement ps = c.prepareStatement( \"select * from users where id = ?\"); ps.setString(1,id); ResultSet rs = ps.executeQuery(); rs.next(); User user = new User(); user.setId(rs.getString(\"id\")); user.setName(rs.getString(\"name\")); user.setPassword(rs.getString(\"password\")); rs.close(); ps.close(); c.close(); return user; }\tpublic interface ConnectionMaker { public Connection makeConnection() throws ClassNotFoundException,SQLException; } public class DConnectionMaker implements ConnectionMaker { public Connection makeConnection() throws ClassNotFoundException, SQLException { //D사 connection code return null; } } } [리팩토링5] 관계설정 책임의 분리 인터페이스를 도입하고 클라이언트의 도움을 얻는 방법은 상속을 사용해 비슷한 시도를 했을 경우에 비해서 유연하다. 1-11. 수정한 생성자 1-12. 관계 설정 책임이 추가된 UserDao 클라이언트인 main() 메소드 다음 코드의 문제점 UserDaoTest는 기존에 UserDao가 담당하던 기능, 즉 어떤 ConnectionMaker 구현 클래스를 사용할지를 결정하는 기능을 떠맡았다.\n→ 이렇게 분리될 기능은 UserDao와 ConnectionMaker 구현 클래스의 오브젝트를 만드는 것과, 그렇게 만들어진 두 개의 오브젝트가 연결돼서 사용될 수 있도록 관계를 맺어주는 것이다.\npackage springbook1; import java.sql.Connection; import java.sql.DriverManager; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; public class UserDao { private ConnectionMaker connectionMaker; public UserDao(ConnectionMaker connectionMaker) { this.connectionMaker = connectionMaker; } public void add(User user) throws ClassNotFoundException, SQLException { Connection c = connectionMaker.makeConnection(); PreparedStatement ps = c.prepareStatement( \"insert into users(id, name, password) values(?,?,?)\"); ps.setString(1, user.getId()); ps.setString(2, user.getName()); ps.setString(3, user.getPassword()); ps.executeUpdate(); ps.close(); c.close(); } public User get(String id) throws ClassNotFoundException, SQLException { Connection c = connectionMaker.makeConnection(); PreparedStatement ps = c.prepareStatement( \"select * from users where id = ?\"); ps.setString(1,id); ResultSet rs = ps.executeQuery(); rs.next(); User user = new User(); user.setId(rs.getString(\"id\")); user.setName(rs.getString(\"name\")); user.setPassword(rs.getString(\"password\")); rs.close(); ps.close(); c.close(); return user; }\t} package springbook1; import java.sql.SQLException; public class UserDaoTest { public static void main(String[] args) throws ClassNotFoundException, SQLException { // TODO Auto-generated method stub ConnectionMaker connectionMaker = new DConnectionMaker(); UserDao dao = new UserDao(connectionMaker); User user = new User(); user.setId(\"ocean\"); user.setName(\"zz\"); user.setPassword(\"hi3\"); dao.add(user); System.out.println(user.getId() + \"등록 성공\"); User user2 = dao.get(user.getId()); System.out.println(user2.getName()); System.out.println(user2.getPassword()); System.out.println(user2.getId() + \"조회 성공\"); } } [리팩토링6] 오브젝트 팩토리 팩토리 클래스의 역할은 객체의 생성 방법을 정하고 그렇게 만들어진 오브젝트를 돌려주는 것이다. 1-14. UserDao의 생성 책임을 맡은 팩토리 클래스 1-15. 팩토리를 사용하도록 수정한 UserDaoTest 1-16. DAO 생성 메소드의 추가로 인해 발생하는 중복 1-17. 생성 오브젝트 코드 수정 package springbook1; public class DaoFactory { public UserDao userDao() { return new UserDao(connectionMaker()); } public AccountDao accountDao() { return new AccountDao(connectionMaker()); } public MessageDao messageDao() { return new MessageDao(connectionMaker()); } public ConnectionMaker connectionMaker() { return new DConnectionMaker(); } } package springbook1; import java.sql.SQLException; public class UserDaoTest { public static void main(String[] args) throws ClassNotFoundException, SQLException { // TODO Auto-generated method stub\tUserDao dao = new DaoFactory().userDao(); User user = new User(); user.setId(\"ocean\"); user.setName(\"zz\"); user.setPassword(\"hi3\"); dao.add(user); System.out.println(user.getId() + \"등록 성공\"); User user2 = dao.get(user.getId()); System.out.println(user2.getName()); System.out.println(user2.getPassword()); System.out.println(user2.getId() + \"조회 성공\"); } } 용어 Application Framework : 애플리케이션 개발을 빠르고 효율적으로 할 수 있도록 애프리케이션의 바탕이 되는 틀과 공통 프로그래밍 모델, 기술 API 등을 제공해준다. AOP : 애플리케이션 코드에 산재해서 나타나는 부가적인 기능을 독립적으로 모듈화하는 프로그래밍 모델이다. DAO (Data Access Object) : DB를 사용해 데이터를 조회하거나 조작하는 기능을 전담하도록 만든 오브젝트다. IoC/DI : 오브젝트의 생명주기와 의존관계에 대한 프로그래밍 모델이다. Refactoring : 기존의 코드를 외부의 동작방식에는 변화 없이 내부 구조를 변경해서 재구성하는 작업 또는 기술을 말한다. Service Abstraction : 구체적인 기술과 환경에 종속되지 않도록 유연한 추상 계층을 두는 방법이다. Framework : 애플리케이션을 구성하는 오브젝트가 생성되고 동작하는 방식에 대한 틀을 제공한다. 애플리케이션 코드가 어떻게 작성돼야 하는지에 대한 기준도 제시한다. 이런 틀을 프로그래밍 모델이라고 한다. SOLID : 객체지향 설계 원칙 SRP(The Single Responsibility Principle) - 단일 책임 원칙 OCP(The Open Closed Principle) - 개방 폐쇄 원칙 LSP(The Liskov Substitution Principle) - 리스코프 치환 원칙 ISP(The Interface Segregation Principle) - 인터페이스 분리 원칙 DIP(The Dependency Inversion Principle) - 의존관계 역전 원칙 책 속 자료 디자인 패턴 GoF의 디자인 패턴, 에릭 감마 외 Head First Design Patterns, 에릭 프리먼 객체지향 설계 원칙(SOLID) Java 프로그래머를 위한 UML 실전에서는 이것만 쓴다 (UML for Java Programmer), 밥 마틴 소프트웨어 개발의 지혜: 원칙, 디자인 패턴, 실천 방법 (Agile Software Development, Principles, Patterns, and Practices), 밥 마틴 SOLID 소개, 로버트 마틴 참고 자료 [book] 토비의 스프링 3.1 Vol 1: 스프링의 이해와 원리, 이일민 ","wordCount":"2259","inLanguage":"en","datePublished":"2022-11-26T00:08:02+09:00","dateModified":"2022-11-26T00:08:02+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://slow-wave.github.io/post/spring/spring_toby_0/"},"publisher":{"@type":"Organization","name":"slow-wave blog","logo":{"@type":"ImageObject","url":"http://slow-wave.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://slow-wave.github.io/ accesskey=h title="Home (Alt + H)"><img src=http://slow-wave.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://slow-wave.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=http://slow-wave.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=http://slow-wave.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://slow-wave.github.io/>Home</a>&nbsp;»&nbsp;<a href=http://slow-wave.github.io/post/>Posts</a></div><h1 class=post-title>[토비의 스프링 3.1] 1.1~1.4 정리</h1><div class=post-meta><span title='2022-11-26 00:08:02 +0900 KST'>November 26, 2022</span>&nbsp;·&nbsp;11 min&nbsp;·&nbsp;2259 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/post/spring/spring_toby_0.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#스프링이란-무엇인가>스프링이란 무엇인가?</a><ul><li><a href=#1-애플리케이션의-기본-틀---스프링-컨테이너>1) 애플리케이션의 기본 틀 - 스프링 컨테이너</a></li><li><a href=#2-공통-프로그래밍-모델---iocdi-서비스-추상화-aop>2) 공통 프로그래밍 모델 - IoC/DI, 서비스 추상화, AOP</a></li><li><a href=#3-기술-api>3) 기술 API</a></li></ul></li><li><a href=#스프링의-성공-요인>스프링의 성공 요인</a></li></ul><ul><li><a href=#12-dao의-분리>1.2 DAO의 분리</a><ul><li><a href=#121-관심사의-분리>1.2.1 관심사의 분리</a></li><li><a href=#122-커넥션-만들기의-추출>1.2.2 커넥션 만들기의 추출</a></li><li><a href=#123-db-커텍션-만들기의-독립>1.2.3 DB 커텍션 만들기의 독립</a></li></ul></li><li><a href=#13-dao의-확장>1.3 DAO의 확장</a><ul><li><a href=#134-원칙과-패턴>1.3.4 원칙과 패턴</a></li></ul></li><li><a href=#14-제어의-역전ioc>1.4 제어의 역전(IoC)</a><ul><li><a href=#143-제어권의-이전을-통한-제어관계-역전>1.4.3 제어권의 이전을 통한 제어관계 역전</a></li></ul></li></ul><ul><li><a href=#책-속-자료>책 속 자료</a></li><li><a href=#참고-자료>참고 자료</a></li></ul></nav></div></details></div><div class=post-content><h2 id=스프링이란-무엇인가>스프링이란 무엇인가?<a hidden class=anchor aria-hidden=true href=#스프링이란-무엇인가>#</a></h2><ul><li>스프링은 자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워크다.</li><li>스프링을 사용한다는 것은 다음의 세 가지 요소를 적극적으로 활용해서 애플리케이션을 개발한다는 뜻이다.</li><li>스프링 개발 철학 중 하나는 ‘항상 프레임워크 기반의 접근 방법을 사용하라’이다.</li><li>프레임워크의 가장 중요한 목적은 개발자가 일정한 틀을 따라 효과적으로 애플리케이션을 개발하도록 돕는 것이다. 따라서 프레임워크를 잘 이해하려면 프레임워크를 사용했을 때 애플리케이션 코드가 어떻게 만들어지는지 자세히 살펴봐야 한다.</li></ul><h3 id=1-애플리케이션의-기본-틀---스프링-컨테이너>1) 애플리케이션의 기본 틀 - 스프링 컨테이너<a hidden class=anchor aria-hidden=true href=#1-애플리케이션의-기본-틀---스프링-컨테이너>#</a></h3><ul><li>스프링은 스프링 컨테이너라고 불리는 스프링 런타임 엔진을 제공한다.</li></ul><h3 id=2-공통-프로그래밍-모델---iocdi-서비스-추상화-aop>2) 공통 프로그래밍 모델 - IoC/DI, 서비스 추상화, AOP<a hidden class=anchor aria-hidden=true href=#2-공통-프로그래밍-모델---iocdi-서비스-추상화-aop>#</a></h3><p>스프링은 세 가지 핵심 프로그래밍 모델을 지원한다.</p><ul><li>IoC/DI : 오브젝트의 생명주기와 의존관계에 대한 프로그래밍 모델이다.</li><li>서비스 추상화 : 구체적인 기술과 환경에 종속되지 않도록 유연한 추상 계층을 두는 방법이다.</li><li>AOP : 애플리케이션 코드에 산재해서 나타나는 부가적인 기능을 독립적으로 모듈화하는 프로그래밍 모델이다.</li></ul><h3 id=3-기술-api>3) 기술 API<a hidden class=anchor aria-hidden=true href=#3-기술-api>#</a></h3><h2 id=스프링의-성공-요인>스프링의 성공 요인<a hidden class=anchor aria-hidden=true href=#스프링의-성공-요인>#</a></h2><ul><li>단순함<ul><li>스프링은 이 잃어버린 객체지향 언어의 장점을 다시 개발자들이 살릴 수 있도록 도와주는 도구다.</li><li>스프링이 강력하게 주장하는 것은 가장 단순한 객체지향적인 개발 모델인 POJO 프로그래밍이다.</li></ul></li><li>유연성<ul><li>스프링은 다른 많은 프레임워크와 편리하게 접목돼서 사용할 수 있다.</li></ul></li></ul><h1 id=1장-오브젝트와-의존관계>1장 오브젝트와 의존관계<a hidden class=anchor aria-hidden=true href=#1장-오브젝트와-의존관계>#</a></h1><ul><li>스프링이 자바에서 가장 중요하게 가치를 두는 것은 바로 객체지향 프로그래밍이 가능한 언어라는 점이다.</li><li>스프링이 관심을 두는 대상은 오브젝트다. 애플리케이션에서 오브젝트가 생성되고 다른 오브젝트와 관계를 맺고, 사용되고, 소멸하기까지의 전 과정을 진지하게 생각해볼 필요가 있다.</li><li>오브젝트에 대한 관심은 오브젝트의 설계로 발전하게 된다. 객체지향 설계의 기초와 원칙을 비롯해서, 디자인 패턴, 리팩토링, 단위테스트와 같은 오브젝트 설계와 구현에 관한 여러 가지 응용 기술과 지식이 요구된다.</li></ul><h2 id=12-dao의-분리>1.2 DAO의 분리<a hidden class=anchor aria-hidden=true href=#12-dao의-분리>#</a></h2><h3 id=121-관심사의-분리>1.2.1 관심사의 분리<a hidden class=anchor aria-hidden=true href=#121-관심사의-분리>#</a></h3><ul><li><p>개발자가 객체를 설계할 때 가장 염두에 둬야 할 사항은 바로 미래의 변화를 어떻게 대비할 것인가이다.</p></li><li><p>객체지향 설계와 프로그래밍 이전의 절차적 프로그래밍 패러다임에 비해 초기에 좀 더 많은, 번거로운 작업을 요구하는 이유는 객체지향 기술 자체가 지니는, 변화에 효과적으로 대처할 수 있다는 기술적인 특징 때문이다.</p></li><li><p>어떻게 변경이 일어날 때 필요한 작업을 최소화하고, 그 변경이 다른 곳에 문제를 일으키지 않게 할 수 있을까? 그것은 분리와 확장을 고려한 설계가 있었기 때문이다.</p></li><li><p>모든 변경과 발전은 한 번에 한 가지 관심사항에 집중해서 일어난다.</p></li><li><p>프로그래밍의 기초 개념 중에 관심사의 분리라는게 있다.</p><p>→ 관심이 같은 것끼리는 하나의 객체 안으로 또는 친한 객체로 모이게 하고, 관심이 다른 것은 가능한 한 따로 떨어져서 서로 영향을 주지 않도록 분리하는 것이다.</p></li></ul><h3 id=122-커넥션-만들기의-추출>1.2.2 커넥션 만들기의 추출<a hidden class=anchor aria-hidden=true href=#122-커넥션-만들기의-추출>#</a></h3><p><strong>변경사항에 대한 검증: 리팩토링과 테스트</strong></p><ul><li>여러 메소드에 중복돼서 등장하는 특정 관심사항이 담긴 코드를 별도의 메소드로 분리해냈다. → 리팩토링</li><li>공통의 기능을 담당하는 메소드로 중복된 코드를 뽑아내는 것을 리팩토링에서는 메소드 추출 기법이라고 한다.</li></ul><h3 id=123-db-커텍션-만들기의-독립>1.2.3 DB 커텍션 만들기의 독립<a hidden class=anchor aria-hidden=true href=#123-db-커텍션-만들기의-독립>#</a></h3><p><strong>상속을 통한 확장</strong></p><ul><li>템플릿 메소드 패턴 - 슈퍼클래스에 기본적인 로직의 흐름을 만들고, 그 기능의 일부를 추상 메소드나 필요에 맞게 구현해서 사용하도록 하는 방법이다.</li><li>팩토리 메소드 패턴 - 서브클래스에서 구체적인 오브젝트 생성 방법을 결정하게하는 것이다.</li><li>디자인 패턴은 설계 전략이기도 하지만 커뮤니케이션 수단이기도 하다.</li></ul><h2 id=13-dao의-확장>1.3 DAO의 확장<a hidden class=anchor aria-hidden=true href=#13-dao의-확장>#</a></h2><h3 id=134-원칙과-패턴>1.3.4 원칙과 패턴<a hidden class=anchor aria-hidden=true href=#134-원칙과-패턴>#</a></h3><p><strong>개방 폐쇄 원칙(OCP, Open-Closed Principle)</strong></p><ul><li>개방 폐쇄 원칙은 깔끔한 설계를 위해 적용 가능한 객체지향 설계 원칙 중 하나다.</li><li>간단히 정의하면 ‘클래스나 모듈은 확장에는 열려 있어야 하고 변경에는 닫혀 있어야 한다.’라고 할 수 있다.</li></ul><p><strong>높은 응집도와 낮은 결합도</strong></p><ul><li>개방 폐쇄 원칙은 높은 응집도와 낮은 결합도(high coherence and low coupling)라는 소프트웨어 개발의 고전적인 원리로도 설명이 가능하다.</li><li>높은 응집도<ul><li>하나의 모듈, 클래스가 하나의 책임 또는 관심사에만 집중되어 있다.</li><li>변화가 일어날 때 해당 모듈에서 변하는 부분이 크다.</li></ul></li><li>낮은 결합도<ul><li>결합도란 ‘하나의 오브젝트가 변경이 일어날 때에 관계를 맺고 있는 다른 오브젝트에게 변화를 요구하는 정도’라고 할 수 있다.</li><li>책임과 관심사가 다른 오브젝트 또는 모듈과는 낮은 결합도, 즉 느슨하게 연결된 형태를 유지하는 것이 바람직하다.</li><li>결합도가 낮아지면 변화에 대응하는 속도가 높아지고, 구성이 깔끔해진다. 확장도 편리하다.</li></ul></li></ul><p><strong>전략 패턴</strong></p><ul><li>전략 패턴은 자신의 기능 맥락에서, 필요에 따라 변경이 필요한 알고리즘을 인터페이스를 통해 통째로 외부로 분리시키고, 이를 구현한 구체적인 알고리즘 클래스를 필요에 따라 바꿔서 사용할 수 있게 하는 디자인 패턴이다.</li><li>스프링이란 객체지향적 설계 원칙과 디자인 패턴에 나타난 장점을 자연스럽게 개발자들이 활용할 수 있게 해주는 프레임워크다.</li></ul><h2 id=14-제어의-역전ioc>1.4 제어의 역전(IoC)<a hidden class=anchor aria-hidden=true href=#14-제어의-역전ioc>#</a></h2><h3 id=143-제어권의-이전을-통한-제어관계-역전>1.4.3 제어권의 이전을 통한 제어관계 역전<a hidden class=anchor aria-hidden=true href=#143-제어권의-이전을-통한-제어관계-역전>#</a></h3><ul><li>제어의 역적이라는 건, 간단히 프로그램의 제어 흐름 구조가 뒤바뀌는 것이라고 설명할 수 있다.</li><li>일반적인 프로그램의 흐름<ul><li>main() 메소드와 같이 프로그램이 시작되는 지점에서 다음에 사용할 오브젝트 결정 → 결정한 오브젝트 생성 → 만들어진 오브젝트에 있는 메소드 호출 → 오브젝트 메소드 안에서 다음에 사용할 것을 결정하고 호출하는 식의 작업 반복</li><li>모든 오브젝트가 능동적으로 자신이 사용할 클래스를 결정하고, 언제 어떻게 오브젝트를 만들지를 스스로 관장한다.</li></ul></li><li>제어의 역전에서는 오브젝트가 자신이 사용할 오브젝트를 스스로 선택하지 않는다. 당연히 생성하지도 않는다. 모든 제어 권한을 자신이 아닌 다른 대상에게 위임한다.</li><li>프레임워크도 제어의 역전 개념이 적용된 대표적인 기술이다.<ul><li>라이브러리 vs. 프레임워크<ul><li>라이브러리 : 라이브러리를 사용하는 애플리케이션 코드는 애플리케이션 흐름을 제어한다.</li><li>프레임워크 : 거꾸로 애플리케이션 코드가 프레임워크에 의해 사용된다.</li></ul></li></ul></li><li>스프링은 IoC를 모든 기능의 기초가 되는 기반기술로 삼고 있으며, IoC를 극한까지 적용하고 있는 프레임워크다.</li></ul><h1 id=code>Code<a hidden class=anchor aria-hidden=true href=#code>#</a></h1><ul><li>1-1. 사용자 정보 저장용 자바빈 User 클래스</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>User</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=n>password</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>getId</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setId</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>getPassword</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>password</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setPassword</span><span class=o>(</span><span class=n>String</span> <span class=n>password</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>password</span> <span class=o>=</span> <span class=n>password</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>1-2. JDBC를 이용한 등록과 조회 기능이 있는 UserDao 클래스<ul><li>다음 코드의 문제점<ul><li>add()와 get() method 부분에 DB connection 부분이 중복되어있음.</li><li>예외 처리</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.Connection</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.DriverManager</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.PreparedStatement</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.ResultSet</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Class</span><span class=o>.</span><span class=na>forName</span><span class=o>(</span><span class=s>&#34;com.mysql.jdbc.Driver&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>DriverManager</span><span class=o>.</span><span class=na>getConnection</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;jdbc:mysql://localhost/test&#34;</span><span class=o>,</span> <span class=s>&#34;spring&#34;</span><span class=o>,</span> <span class=s>&#34;book&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;insert into users(id, name, password) values(?,?,?)&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>3</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>executeUpdate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>User</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Class</span><span class=o>.</span><span class=na>forName</span><span class=o>(</span><span class=s>&#34;com.mysql.jdbc.Driver&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>DriverManager</span><span class=o>.</span><span class=na>getConnection</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;jdbc:mysql://localhost/test&#34;</span><span class=o>,</span> <span class=s>&#34;spring&#34;</span><span class=o>,</span> <span class=s>&#34;book&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;select * from users where id = ?&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ResultSet</span> <span class=n>rs</span> <span class=o>=</span> <span class=n>ps</span><span class=o>.</span><span class=na>executeQuery</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;name&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;password&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>1-3. 테스트용 main() 메소드</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserDaoTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>// TODO Auto-generated method stub
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>UserDao</span> <span class=n>dao</span> <span class=o>=</span> <span class=k>new</span> <span class=n>UserDao</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=s>&#34;ground&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=s>&#34;&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=s>&#34;hi2&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>dao</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;등록 성공&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user2</span> <span class=o>=</span> <span class=n>dao</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getId</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;조회 성공&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>[리팩토링1] 중복 코드의 메소드 추출을 통해 코드 분리</li><li>1-4. getConnection() 메소드를 추출해서 중복을 제거한 UserDao</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.Connection</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.DriverManager</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.PreparedStatement</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.ResultSet</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>getConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;insert into users(id, name, password) values(?,?,?)&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>3</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>executeUpdate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>User</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>getConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;select * from users where id = ?&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ResultSet</span> <span class=n>rs</span> <span class=o>=</span> <span class=n>ps</span><span class=o>.</span><span class=na>executeQuery</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;name&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;password&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>private</span> <span class=n>Connection</span> <span class=nf>getConnection</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Class</span><span class=o>.</span><span class=na>forName</span><span class=o>(</span><span class=s>&#34;com.mysql.jdbc.Driver&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>DriverManager</span><span class=o>.</span><span class=na>getConnection</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;jdbc:mysql://localhost/test&#34;</span><span class=o>,</span> <span class=s>&#34;spring&#34;</span><span class=o>,</span> <span class=s>&#34;book&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>c</span><span class=o>;</span> 
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>[리팩토링2] 상속을 통한 확장 (템플릿 메소드 패턴 & 팩토리 메소드 패턴 적용)<ul><li>클래스 계층구조를 통해 두 개의 관심이 독립적으로 분리되면서 변경 작업이 용이해짐.</li></ul></li><li>1.5. 상속을 통한 확장 방법이 제공되는 UserDao<ul><li>다음 코드의 문제점<ul><li><ol><li>만약 이미 UserDao가 다른 목적을 위해 상속을 사용하고 있다면? 자바는 클래스의 다중상속을 허용하지 않는다.</li></ol></li><li><ol start=2><li>상속을 통한 상하위 클래스의 관계는 생각보다 밀접하다.</li></ol></li><li><ol start=3><li>확장된 기능인 DB 커넥션을 생성하는 코드를 다른 DAO 클래스에 적용할 수 없다.</li></ol></li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.Connection</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.DriverManager</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.PreparedStatement</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.ResultSet</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>getConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;insert into users(id, name, password) values(?,?,?)&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>3</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>executeUpdate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>User</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>getConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;select * from users where id = ?&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ResultSet</span> <span class=n>rs</span> <span class=o>=</span> <span class=n>ps</span><span class=o>.</span><span class=na>executeQuery</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;name&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;password&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=c1>// getConnection() 메소드는 Connection 타입 오브젝트를 생성한다는 기능을 정의해놓은 추상 메소드
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>public</span> <span class=kd>abstract</span> <span class=n>Connection</span> <span class=nf>getConnection</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>NUserDao</span> <span class=kd>extends</span> <span class=n>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  	<span class=c1>// 서브클래스의 getConnection() 메소드는 어떤 Connection 클래스의 오브젝트를 어떻게 생성할 것인지 결정하는 방법
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=kd>public</span> <span class=n>Connection</span> <span class=nf>getConnection</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>			<span class=c1>//N사 DB connection code	
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=k>return</span> <span class=n>c</span><span class=o>;</span>
</span></span><span class=line><span class=cl>			
</span></span><span class=line><span class=cl>		<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>DUserDao</span> <span class=kd>extends</span> <span class=n>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>public</span> <span class=n>Connection</span> <span class=nf>getConnection</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>			<span class=c1>//D사 DB connection code	
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=k>return</span> <span class=n>c</span><span class=o>;</span>
</span></span><span class=line><span class=cl>			
</span></span><span class=line><span class=cl>		<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>[리팩토링3] 클래스의 분리</li><li>1.6 독립된 SimpleConnectionMaker를 사용하게 만든 UserDao</li><li>1.7 독립시킨 DB연결 기능인 SimpleConnectionMaker</li><li>다음 코드의 문제점<ul><li>고객이 DB 커넥션을 가져오는 방법을 자유롭게 확장하기가 어려움. → UserDao가 SimpleConnectionMaker라는 특정 클래스와 그 코드에 종속적임.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.Connection</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.DriverManager</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.PreparedStatement</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.ResultSet</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>private</span> <span class=n>SimpleConnectionMaker</span> <span class=n>simpleConnectionMaker</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=nf>UserDao</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>simpleConnectionMaker</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SimpleConnectionMaker</span><span class=o>();</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>simpleConnectionMaker</span><span class=o>.</span><span class=na>makeNewConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;insert into users(id, name, password) values(?,?,?)&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>3</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>executeUpdate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>User</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>simpleConnectionMaker</span><span class=o>.</span><span class=na>makeNewConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;select * from users where id = ?&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ResultSet</span> <span class=n>rs</span> <span class=o>=</span> <span class=n>ps</span><span class=o>.</span><span class=na>executeQuery</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;name&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;password&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SimpleConnectionMaker</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>public</span> <span class=n>Connection</span> <span class=nf>makeNewConnection</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span>
</span></span><span class=line><span class=cl>		<span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>			<span class=n>Class</span><span class=o>.</span><span class=na>forName</span><span class=o>(</span><span class=s>&#34;com.mysql.jdbc.Driver&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>			<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>DriverManager</span><span class=o>.</span><span class=na>getConnection</span><span class=o>(</span>
</span></span><span class=line><span class=cl>					<span class=s>&#34;jdbc:mysql://localhost/test&#34;</span><span class=o>,</span> <span class=s>&#34;spring&#34;</span><span class=o>,</span> <span class=s>&#34;book&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=n>c</span><span class=o>;</span> 
</span></span><span class=line><span class=cl>		<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>	
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>[리팩토링4] 인터페이스 도입</li><li>1-8. ConnectionMaker 인터페이스</li><li>1-9. ConnectionMaker 구현 클래스</li><li>1-10. ConnectionMaker 인터페이스를 사용하도록 개선한 UserDao</li><li>다음 코드의 문제점<ul><li>UserDao의 다른 모든 곳에서는 인터페이스를 이용하게 만들어서 DB 커넥션을 제공하는 클래스에 대한 구체적인 정보는 모두 제거가 가능했지만, 초기에 한 번 어떤 클래스의 오브젝트를 생성할지를 결정하는 생성자의 코드는 제거 되지 않음.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.Connection</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.DriverManager</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.PreparedStatement</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.ResultSet</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>private</span> <span class=n>ConnectionMaker</span> <span class=n>connectionMaker</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=nf>UserDao</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>connectionMaker</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DConnectionMaker</span><span class=o>();</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>connectionMaker</span><span class=o>.</span><span class=na>makeConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;insert into users(id, name, password) values(?,?,?)&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>3</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>executeUpdate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>User</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>connectionMaker</span><span class=o>.</span><span class=na>makeConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;select * from users where id = ?&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ResultSet</span> <span class=n>rs</span> <span class=o>=</span> <span class=n>ps</span><span class=o>.</span><span class=na>executeQuery</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;name&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;password&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>	
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>interface</span> <span class=nc>ConnectionMaker</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>public</span> <span class=n>Connection</span> <span class=nf>makeConnection</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span><span class=n>SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>DConnectionMaker</span> <span class=kd>implements</span> <span class=n>ConnectionMaker</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>public</span> <span class=n>Connection</span> <span class=nf>makeConnection</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>			<span class=c1>//D사 connection code
</span></span></span><span class=line><span class=cl><span class=c1></span>			<span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>[리팩토링5] 관계설정 책임의 분리<ul><li>인터페이스를 도입하고 클라이언트의 도움을 얻는 방법은 상속을 사용해 비슷한 시도를 했을 경우에 비해서 유연하다.</li></ul></li><li>1-11. 수정한 생성자</li><li>1-12. 관계 설정 책임이 추가된 UserDao 클라이언트인 main() 메소드</li><li>다음 코드의 문제점<ul><li><p>UserDaoTest는 기존에 UserDao가 담당하던 기능, 즉 어떤 ConnectionMaker 구현 클래스를 사용할지를 결정하는 기능을 떠맡았다.</p><p>→ 이렇게 분리될 기능은 UserDao와 ConnectionMaker 구현 클래스의 오브젝트를 만드는 것과, 그렇게 만들어진 두 개의 오브젝트가 연결돼서 사용될 수 있도록 관계를 맺어주는 것이다.</p></li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.Connection</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.DriverManager</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.PreparedStatement</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.ResultSet</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserDao</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>private</span> <span class=n>ConnectionMaker</span> <span class=n>connectionMaker</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=nf>UserDao</span><span class=o>(</span><span class=n>ConnectionMaker</span> <span class=n>connectionMaker</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>connectionMaker</span> <span class=o>=</span> <span class=n>connectionMaker</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=n>User</span> <span class=n>user</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>connectionMaker</span><span class=o>.</span><span class=na>makeConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;insert into users(id, name, password) values(?,?,?)&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>3</span><span class=o>,</span> <span class=n>user</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>executeUpdate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>User</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Connection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>connectionMaker</span><span class=o>.</span><span class=na>makeConnection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=n>PreparedStatement</span> <span class=n>ps</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>prepareStatement</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=s>&#34;select * from users where id = ?&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>setString</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>ResultSet</span> <span class=n>rs</span> <span class=o>=</span> <span class=n>ps</span><span class=o>.</span><span class=na>executeQuery</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;name&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=n>rs</span><span class=o>.</span><span class=na>getString</span><span class=o>(</span><span class=s>&#34;password&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>rs</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>ps</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>c</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>user</span><span class=o>;</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl>	<span class=o>}</span>	
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserDaoTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>// TODO Auto-generated method stub
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>ConnectionMaker</span> <span class=n>connectionMaker</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DConnectionMaker</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>UserDao</span> <span class=n>dao</span> <span class=o>=</span> <span class=k>new</span> <span class=n>UserDao</span><span class=o>(</span><span class=n>connectionMaker</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=s>&#34;ocean&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=s>&#34;zz&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=s>&#34;hi3&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>dao</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;등록 성공&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user2</span> <span class=o>=</span> <span class=n>dao</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getId</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;조회 성공&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>[리팩토링6] 오브젝트 팩토리<ul><li>팩토리 클래스의 역할은 객체의 생성 방법을 정하고 그렇게 만들어진 오브젝트를 돌려주는 것이다.</li></ul></li><li>1-14. UserDao의 생성 책임을 맡은 팩토리 클래스</li><li>1-15. 팩토리를 사용하도록 수정한 UserDaoTest</li><li>1-16. DAO 생성 메소드의 추가로 인해 발생하는 중복</li><li>1-17. 생성 오브젝트 코드 수정</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>DaoFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>UserDao</span> <span class=nf>userDao</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=k>new</span> <span class=n>UserDao</span><span class=o>(</span><span class=n>connectionMaker</span><span class=o>());</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>AccountDao</span> <span class=nf>accountDao</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=k>new</span> <span class=n>AccountDao</span><span class=o>(</span><span class=n>connectionMaker</span><span class=o>());</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>MessageDao</span> <span class=nf>messageDao</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=k>new</span> <span class=n>MessageDao</span><span class=o>(</span><span class=n>connectionMaker</span><span class=o>());</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>ConnectionMaker</span> <span class=nf>connectionMaker</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=k>new</span> <span class=n>DConnectionMaker</span><span class=o>();</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>springbook1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.sql.SQLException</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserDaoTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>ClassNotFoundException</span><span class=o>,</span> <span class=n>SQLException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>// TODO Auto-generated method stub		
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>UserDao</span> <span class=n>dao</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DaoFactory</span><span class=o>().</span><span class=na>userDao</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=s>&#34;ocean&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=s>&#34;zz&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>user</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=s>&#34;hi3&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>dao</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>user</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;등록 성공&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user2</span> <span class=o>=</span> <span class=n>dao</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>user</span><span class=o>.</span><span class=na>getId</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getPassword</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user2</span><span class=o>.</span><span class=na>getId</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;조회 성공&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h1 id=용어>용어<a hidden class=anchor aria-hidden=true href=#용어>#</a></h1><ul><li>Application Framework : 애플리케이션 개발을 빠르고 효율적으로 할 수 있도록 애프리케이션의 바탕이 되는 틀과 공통 프로그래밍 모델, 기술 API 등을 제공해준다.</li><li>AOP : 애플리케이션 코드에 산재해서 나타나는 부가적인 기능을 독립적으로 모듈화하는 프로그래밍 모델이다.</li><li>DAO (Data Access Object) : DB를 사용해 데이터를 조회하거나 조작하는 기능을 전담하도록 만든 오브젝트다.</li><li>IoC/DI : 오브젝트의 생명주기와 의존관계에 대한 프로그래밍 모델이다.</li><li>Refactoring : 기존의 코드를 외부의 동작방식에는 변화 없이 내부 구조를 변경해서 재구성하는 작업 또는 기술을 말한다.</li><li>Service Abstraction : 구체적인 기술과 환경에 종속되지 않도록 유연한 추상 계층을 두는 방법이다.</li><li>Framework : 애플리케이션을 구성하는 오브젝트가 생성되고 동작하는 방식에 대한 틀을 제공한다. 애플리케이션 코드가 어떻게 작성돼야 하는지에 대한 기준도 제시한다. 이런 틀을 프로그래밍 모델이라고 한다.</li><li>SOLID : 객체지향 설계 원칙<ul><li>SRP(The Single Responsibility Principle) - 단일 책임 원칙</li><li>OCP(The Open Closed Principle) - 개방 폐쇄 원칙</li><li>LSP(The Liskov Substitution Principle) - 리스코프 치환 원칙</li><li>ISP(The Interface Segregation Principle) - 인터페이스 분리 원칙</li><li>DIP(The Dependency Inversion Principle) - 의존관계 역전 원칙</li></ul></li></ul><h2 id=책-속-자료>책 속 자료<a hidden class=anchor aria-hidden=true href=#책-속-자료>#</a></h2><ul><li>디자인 패턴<ul><li>GoF의 디자인 패턴, 에릭 감마 외</li><li>Head First Design Patterns, 에릭 프리먼</li></ul></li><li>객체지향 설계 원칙(SOLID)<ul><li>Java 프로그래머를 위한 UML 실전에서는 이것만 쓴다 (UML for Java Programmer), 밥 마틴</li><li>소프트웨어 개발의 지혜: 원칙, 디자인 패턴, 실천 방법 (Agile Software Development, Principles, Patterns, and Practices), 밥 마틴</li><li><a href=http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod>SOLID 소개, 로버트 마틴</a></li></ul></li></ul><h2 id=참고-자료>참고 자료<a hidden class=anchor aria-hidden=true href=#참고-자료>#</a></h2><ul><li><a href=https://product.kyobobook.co.kr/detail/S000000935358>[book] <strong>토비의 스프링 3.1 Vol 1: 스프링의 이해와 원리, 이일민</strong></a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://slow-wave.github.io/tags/spring/>Spring</a></li><li><a href=http://slow-wave.github.io/tags/backend/>Backend</a></li><li><a href=http://slow-wave.github.io/tags/java/>Java</a></li></ul><nav class=paginav><a class=prev href=http://slow-wave.github.io/post/problem_solving/ps_bruteforce_1/><span class=title>« Prev</span><br><span>[백준] Brute Force 1- 18111번 마인크래프트</span></a>
<a class=next href=http://slow-wave.github.io/post/algorithm/algo_prime/><span class=title>Next »</span><br><span>[algorithm] 소수 판별</span></a></nav></footer><script src=https://utteranc.es/client.js repo=slow-wave/blog_comments issue-term=pathname theme=github-dark crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=http://slow-wave.github.io/>slow-wave blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>